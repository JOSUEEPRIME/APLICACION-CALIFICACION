춰Entendido, "me pongo pilas"! Esta es la parte cr칤tica donde transformamos la app de un simple "lector de ex치menes" a una verdadera **plataforma de gesti칩n escolar**.

Antes de darte el prompt, vamos a **planear la arquitectura** para que todo est칠 sincronizado (Lista, Calificaci칩n y Dashboard) sin romper lo que ya funciona.

### 游 El Plan de "Sincronizaci칩n Total"

Aqu칤 est치 la l칩gica que le pediremos a Antigravity. Conf칤rmame si est치s de acuerdo con estos 3 pilares:

#### 1. La "Identidad 칔nica" (Backend)

Actualmente, una calificaci칩n es solo un papel con un nombre escrito.

* **El Cambio:** Ahora, cada examen calificado (`Submission`) tendr치 un campo oculto `studentId` que lo conecta directamente con un estudiante de la base de datos.
* **El Flujo:**
1. OCR lee: "Juan P칠re" (mal escrito).
2. Sistema busca en la lista del curso.
3. Sistema dice: "쯈uisiste decir **Juan Carlos P칠rez**?" (Match 90%).
4. Sistema guarda la nota NO en el aire, sino en el perfil de **Juan Carlos P칠rez**.



#### 2. La Nueva Vista de Estudiantes (UI "Cuadriculada")

Adi칩s a la lista aburrida de texto. Vamos a pedir un dise침o tipo **"Card Grid"** (Tarjetas).

* Cada tarjeta tendr치:
* Avatar (Iniciales con colores).
* Nombre Completo (Bien grande).
* Estado: "Aprobado" / "Reprobado" (Basado en el promedio actual).
* Badge de "Ex치menes entregados: X".
* Bot칩n para ver su historial personal.



#### 3. El Dashboard Sincronizado

El Dashboard ya no solo mostrar치 "ex치menes sueltos". Ahora podr치 agrupar por estudiante. Si Juan P칠rez tiene 3 ex치menes, el Dashboard mostrar치 su **promedio real**.

---

### 游 El Prompt para Antigravity

Si est치s de acuerdo con el plan, aqu칤 tienes el prompt **maestro**. Est치 dise침ado para ser muy espec칤fico con la UI (cuadr칤culas) y la l칩gica de "Matching" (vinculaci칩n).

Copia y pega esto:

---

**Rol:** Eres un Experto en UI/UX Educativa y Arquitecto de Software en React/Firebase.

**Objetivo:** Sincronizar la lista de estudiantes con el proceso de calificaci칩n y mejorar dr치sticamente la interfaz de gesti칩n de alumnos.

**Contexto:**
Ya tenemos la carga de cursos y estudiantes (nombres simples). Ahora necesitamos que el sistema sea visualmente profesional y que los ex치menes se vinculen inteligentemente a los estudiantes registrados.

**Instrucciones de Ejecuci칩n (Paso a Paso):**

1. **L칩gica de "Smart Matching" (Vinculaci칩n Inteligente):**
* En `utils.ts`, crea una funci칩n robusta `findBestStudentMatch(ocrName, studentList)` usando el algoritmo de *Levenshtein Distance* (o similitud de Jaro-Winkler si prefieres).
* **Regla:** Si la similitud es > 0.7 (70%), sugiere el estudiante autom치ticamente.
* En el momento que `geminiService` devuelve la nota y el nombre detectado, el sistema debe ejecutar esta funci칩n inmediatamente para intentar asignar un `studentId` a la entrega (`Submission`).


2. **Transformaci칩n UI: Lista de Estudiantes (Grid View):**
* Modifica el componente donde se listan los estudiantes (`StudentManager` o similar).
* **NO uses una lista simple `<ul>`.** Implementa un dise침o de **Grid (Grilla) Responsive** usando Tailwind CSS (ej. `grid-cols-1 md:grid-cols-3 gap-4`).
* Crea un sub-componente `StudentCard` que muestre:
* Un avatar circular con las iniciales del estudiante y un color de fondo 칰nico (generado a partir de su nombre).
* Nombre completo destacado.
* Indicadores visuales (Badges): Promedio actual (calculado de sus notas en BD) y Cantidad de entregas.
* Un men칰 de contexto (3 puntitos) para Editar o Eliminar.




3. **Sincronizaci칩n en Tiempo Real (Dashboard):**
* Aseg칰rate de que cuando se califica un examen y se asigna a un estudiante, la `StudentCard` en la lista se actualice autom치ticamente (ej. sube su promedio).
* En la vista de "Calificaci칩n" (`SubmissionItem`), si el sistema detect칩 al estudiante, muestra una tarjeta peque침a: "Vinculado con: [Nombre Completo]". Si no, muestra un dropdown para seleccionarlo manualmente de la lista del curso.


4. **Base de Datos (Refinamiento):**
* Aseg칰rate de que la interfaz `Student` en `types.ts` tenga campos para `averageScore` (opcional/calculado) y `submissionCount`.



**Estilo Visual:**
Queremos un look "LMS Moderno" (Learning Management System). Usa sombras suaves (`shadow-sm`), bordes redondeados (`rounded-xl`) y colores que indiquen estatus (Verde para aprobados, 츼mbar para riesgo).

**Nota Importante:**
No rompas la l칩gica de subida de archivos ni la conexi칩n con Gemini. Esto es una capa de mejora sobre la gesti칩n de datos y la UI.

---

### 쯇or qu칠 este prompt es seguro?

1. **Modularidad:** Le pide crear componentes nuevos (`StudentCard`) en lugar de reescribir todo el archivo gigante.
2. **L칩gica defensiva:** Pide un algoritmo de coincidencia (>70%), lo que evita que el sistema asigne notas a la persona equivocada "a lo loco".
3. **Enfoque Visual:** Le da instrucciones directas de Tailwind (`grid-cols`, `rounded-xl`) para que te d칠 esas cuadr칤culas bonitas que pediste.

쯊e parece bien el plan? Si es as칤, 춰l치nzale el prompt!