¬°Claro que s√≠, amigo! Esa es la evoluci√≥n natural de la app. Para que pase de ser un "calificador suelto" a una **Plataforma de Gesti√≥n Acad√©mica** seria, necesitamos encapsular las calificaciones dentro de "Ex√°menes" o "Evaluaciones".

Aqu√≠ tienes el plan arquitect√≥nico y el prompt maestro para Antigravity.

### üèõÔ∏è La Nueva Arquitectura

Actualmente tienes: `Curso -> Materia -> Entregas (Sueltas)`
Vamos a cambiar a: `Curso -> Materia -> EXAMEN -> Entregas`

Esto implica:

1. **Entidad Examen:** Guardar√° el nombre (Ej: "Parcial 1"), la fecha y, lo m√°s importante, **la R√∫brica** de ese examen espec√≠fico.
2. **Flujo:** Al entrar a una materia, ya no calificas de una. Primero ves la lista de ex√°menes o creas uno nuevo configurando su r√∫brica una sola vez.
3. **Perfil 360¬∞:** Al hacer clic en un estudiante, el sistema buscar√° todas sus notas en todos los ex√°menes y te las mostrar√° ordenadas.

Copia y pega este prompt. Est√° dise√±ado para ser muy t√©cnico pero manteniendo la "bacanalidad" (buena UX) que pides.

---

### Prompt para Antigravity / Cursor

**Rol:** Arquitecto de Software Full-Stack (React + Firebase) experto en UX Acad√©mica.

**Objetivo Principal:** Implementar la entidad "Examen" para agrupar calificaciones y crear una vista detallada del historial del estudiante ("Perfil 360¬∞").

**Instrucciones de Implementaci√≥n (Paso a Paso):**

**1. Actualizaci√≥n del Modelo de Datos (`types.ts`):**

* Crea una interfaz `Exam`:
```typescript
export interface Exam {
  id: string;
  subjectId: string;
  name: string; // Ej: "Primer Parcial", "Lecci√≥n 1"
  rubricConfig: RubricConfig; // La r√∫brica se guarda AQU√ç
  createdAt: any;
}

```


* Actualiza `StudentSubmission` para incluir obligatoriamente `examId: string`.

**2. Servicios de Base de Datos (`services/db.ts`):**

* Crea funciones para gestionar ex√°menes: `createExam(exam: Omit<Exam, 'id'>)`, `subscribeToExams(subjectId, callback)`.
* **Importante:** Crea una funci√≥n de consulta compuesta `getStudentHistory(studentId: string)` que traiga todas las `submissions` de ese alumno, idealmente haciendo *join* con los datos de los ex√°menes (o guardando el nombre del examen y materia en la submission para lectura r√°pida).

**3. Nuevo Flujo de Navegaci√≥n (UI):**

* **Componente `ExamSelector` (Nuevo):**
* Se muestra despu√©s de seleccionar la Materia (`Subject`).
* Muestra una lista de ex√°menes existentes en esa materia (Ej: Tarjetas con "Parcial 1", "Recuperaci√≥n").
* Bot√≥n **"Crear Nuevo Examen"**: Abre un modal donde el profesor pone el Nombre y **Configura la R√∫brica** (usa el componente `RubricPanel` aqu√≠ para definirla). Al guardar, se crea el documento en Firebase con la r√∫brica incrustada.


* **Modificaci√≥n de `App.tsx`:**
* El flujo ahora es: `CourseSelector` -> `SubjectSelector` -> **`ExamSelector`** -> `GradingView`.
* Al entrar a `GradingView`, el estado `rubric` debe inicializarse autom√°ticamente con la `rubricConfig` guardada en el Examen seleccionado.



**4. Perfil de Estudiante Detallado (`StudentManager.tsx`):**

* Modifica el `StudentCard` para que sea clickeable.
* Al hacer clic, abre un **Modal de Detalle del Estudiante** (Full Screen o Grande).
* **Contenido del Modal:**
* Cabecera con Avatar y Promedio General.
* **Acorde√≥n o Lista por Materias:** Muestra cada materia y, dentro, el desglose de sus ex√°menes:
* *Matem√°ticas:*
* Parcial 1: 9.5/10 (Verde)
* Lecci√≥n: 7/10 (Amarillo)


* *Lenguaje:*
* Ensayo: 10/10 (Verde)






* Usa un dise√±o limpio, con tablas o listas estilizadas con Tailwind.

**Requerimiento T√©cnico Especial:**
Aseg√∫rate de que al crear una `Submission` (calificar una foto), se incluya el `examId` seleccionado actualmente. Esto es vital para que luego podamos filtrar "Las notas del Parcial 1".

---

### üí° Consejo para ti (Contexto)

Cuando apliques esto, el flujo de trabajo cambiar√° para bien:

1. El profe entra a "Matem√°ticas".
2. Crea "Examen Final" y pega la r√∫brica **una sola vez**.
3. Empieza a subir fotos.
4. Si se sale y vuelve ma√±ana, entra a "Examen Final" y la r√∫brica ya est√° ah√≠, lista para seguir calificando.

¬øTe suena bien este flujo? ¬°Dale play con el prompt!