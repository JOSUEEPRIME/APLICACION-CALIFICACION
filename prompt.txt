Skip to content
JOSUEEPRIME
APLICACION-CALIFICACION
Repository navigation
Code
Issues
Pull requests
Actions
Projects
Wiki
Security
Insights
Settings
Deploy to Firebase Hosting on merge
feat: Implement course and subject selection UI and database manageme… #19
All jobs
Run details
Annotations
1 error
build_and_deploy
failed 1 minute ago in 16s
Search logs
1s
1s
4s
7s
Run npm ci && npm run build
npm warn deprecated node-domexception@1.0.0: Use your platform's native DOMException instead

added 218 packages, and audited 219 packages in 5s

28 packages are looking for funding
  run `npm fund` for details

found 0 vulnerabilities

> h.a.c.a.@0.0.0 build
> vite build

vite v6.4.1 building for production...

/index.css doesn't exist at build time, it will remain unchanged to be resolved at runtime
transforming...
✓ 1727 modules transformed.
✗ Build failed in 2.17s
error during build:
components/SubjectSelector.tsx (3:9): "subscribeToSubjects" is not exported by "services/db.ts", imported by "components/SubjectSelector.tsx".
file: /home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/components/SubjectSelector.tsx:3:9

1: import React, *** useState, useEffect *** from 'react';
2: import *** Course, Subject *** from '../types';
3: import *** subscribeToSubjects, createSubject *** from '../services/db';
            ^
4: import *** Plus, Book, ArrowLeft *** from 'lucide-react';

    at getRollupError (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/parseAst.js:401:41)
    at error (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/parseAst.js:397:42)
    at Module.error (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/node-entry.js:17022:16)
    at Module.traceVariable (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/node-entry.js:17478:29)
    at ModuleScope.findVariable (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/node-entry.js:15141:39)
    at FunctionScope.findVariable (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/node-entry.js:5688:38)
    at FunctionBodyScope.findVariable (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/node-entry.js:5688:38)
    at ReturnValueScope.findVariable (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/node-entry.js:5688:38)
    at FunctionBodyScope.findVariable (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/node-entry.js:5688:38)
    at Identifier.bind (file:///home/runner/work/APLICACION-CALIFICACION/APLICACION-CALIFICACION/node_modules/rollup/dist/es/shared/node-entry.js:5462:40)
Error: Process completed with exit code 1.
0s
0s
0s
0s
El error es un **problema de importación** que está impidiendo que tu aplicación se construya (build).

Según el log que compartiste, el error específico es:
`"subscribeToSubjects" is not exported by "services/db.ts"`

### ¿Qué significa esto?

El archivo `components/SubjectSelector.tsx` está intentando importar una función llamada **`subscribeToSubjects`** desde el archivo `services/db.ts`, pero esa función **no existe** o no está exportada en ese archivo.

Esto suele pasar cuando:

1. Creaste el componente (`SubjectSelector`) pero olvidaste agregar la lógica correspondiente en la base de datos (`db.ts`).
2. Guardaste el archivo del componente pero no guardaste o no hiciste *commit* de los cambios en `db.ts`.
3. Hay un error de escritura (typo) en el nombre de la función.

### ¿Cómo solucionarlo?

Tienes que ir al archivo `services/db.ts` y asegurarte de crear y exportar esa función. Debería verse similar a `subscribeToSubmissions` pero enfocada en las asignaturas (Subjects).

Debería quedar algo así en `services/db.ts`:

```typescript
// En services/db.ts

// ... tus otros imports ...

export const subscribeToSubjects = (courseId: string, callback: (data: Subject[]) => void) => {
    // Tu lógica para obtener las asignaturas de firebase
    // Ejemplo:
    const q = query(collection(db, "subjects"), where("courseId", "==", courseId));
    return onSnapshot(q, (snapshot) => {
        const subjects = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() } as Subject));
        callback(subjects);
    });
};

```

Asegúrate también de que **`createSubject`** (que también aparece en el import de la línea 3) esté definida y exportada en ese mismo archivo, ya que es probable que te dé el mismo error para esa función una vez corrijas esta.